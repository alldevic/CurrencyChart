<html>
<head>
    <title>Chat</title>
</head>
<body>
<script src="scripts/jquery-1.6.4.min.js" type="text/javascript"></script>
<script src="scripts/jquery.signalr-1.2.2.min.js" type="text/javascript"></script>
<script src="../signalr/hubs" type="text/javascript"></script>
<script type="text/javascript">
    $(function () {
        var chat = $.connection.chat;

        chat.client.addMessage = function (time, message) {
            $('#messages').append('<tr><td>' + time + '</td><td>'+ message + '</td></tr>');
        };

        $.connection.hub.start().done(function () {
            $("#broadcast").click(function () {
                // Call the chat method on the server
                chat.server.send($('#msg').val());
            });
        });
    });
</script>
<h3>Welcome to Chat</h3>

<table border="1" id="messages">
    <thead>
    <tr>
        <td><b>Time</b></td>
        <td><b>Message</b></td>
    </tr>
    </thead>

    @Each.Messages
    <tr>
        <td>@Current.Created</td>
        <td>@Current.Message</td>
    </tr>
    @EndEach
</table>

<div>
    <input type="text" id="msg"/>
    <input type="button" id="broadcast" value="broadcast"/>
</div>
</body>
</html>
